# è‡ªåˆ¶è„šæœ¬è¯­è¨€[6.2] åŒ¿åå‡½æ•°


æœ¬ç¯‡æ¥æè¿°ä¸€ä¸‹åŒ¿åå‡½æ•°çš„å®žçŽ°ã€‚



## åŸºæœ¬å†…å®¹

### langX ä»£ç ç¤ºä¾‹

```text
onEvent => (flag, callback) {
	// xxx
}

callEvent => (flag, data){
	local cb = findCallback(flag);
	if( cb ){
		cb(data);
	}
}

registerListeners => {
	// è¿™é‡Œçš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚
	onEvent(1, data => {
		println("[DEBUG] event 1 = " + data.toString());
	});
	onEvent(2, data => {
		println("[DEBUG] event 2 = " + data.toString());
	});
}
```

ç¬”è€…åœ¨ langX é‡Œé¢ä½¿ç”¨äº†ç±»ä¼¼å‡½æ•°å£°æ˜Žçš„è¯­æ³•æ¥å£°æ˜Žä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ 

å½“ä¸€ä¸ªå‡½æ•°çš„å‚æ•°éœ€æ±‚å¦å¤–ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œ ä½¿ç”¨åŒ¿åå‡½æ•°å¾ˆæ–¹ä¾¿ã€‚

### ä¸»è¦æ€è·¯

è®¾è®¡äº†åˆé€‚çš„è¯­æ³•ä¹‹åŽï¼Œ è§£æžè¯¥è¯­æ³•ç”Ÿæˆä¸€ä¸ªå‡½æ•°ç»“æž„å³å¯ã€‚  å®žçŽ°äº†å‡½æ•°è¿™ä¸ªåŠŸèƒ½ä¹‹åŽï¼Œ è¿™ä¸€éƒ¨åˆ†åšèµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ 

åœ¨å¤„ç†å‡½æ•°åç§°çš„åœ°æ–¹ï¼Œ ç»™ä¸€ä¸ªç©ºå­—ç¬¦ä¸²æˆ–è€… `nullptr`ä¹‹ç±»çš„å³å¯ã€‚ 

åŒ¿åå‡½æ•°é™¤äº†æ²¡æœ‰åå­—ä¹‹å¤–ï¼Œ å…¶ä»–è¡Œä¸ºå’Œå‡½æ•°å‡ ä¹Žä¸€æ ·ã€‚  

### ä¸€äº›å…¶ä»–é—®é¢˜

åœ¨å¤§å¤šæ•°è¯­è¨€é‡Œé¢ï¼Œ åŒ¿åå‡½æ•°ä¼¼ä¹Žéƒ½å¯ä»¥å¼•ç”¨åˆ›å»ºæ—¶å€™çš„å˜é‡çŽ¯å¢ƒçš„å€¼ã€‚

ä¸¾ä¸ªðŸŒ°ï¼Œ cpp é‡Œé¢æœ‰ä¸€ä¸ªæ•æ‰åˆ—è¡¨ï¼Œ ç”¨äºŽæ•èŽ·å£°æ˜Žæ—¶çŽ¯å¢ƒçš„å€¼ã€‚ è€Œ js å¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚ 

çœ‹ä¸‹é¢çš„ js ä»£ç ã€‚

```javascript
function callWrapper(cb = Function()) {
  cb();
}

function test() {
  let foo = 'bar';
  callWrapper(function() {
    console.log(foo); // bar
    foo = 1;
  });
  console.log(foo);  // 1
}

test();
```

*ç‚¹å‡»é“¾æŽ¥ https://jsfiddle.net/qpgjLsrd/ åº”è¯¥å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚ æŽ§åˆ¶å°çš„è¾“å‡ºç»“æžœåœ¨å³ä¸‹è§’çš„ Console çª—å£é‡Œé¢ï¼Œç‚¹ä¸€ä¸‹Consoleæ ‡é¢˜ä¼šå‡ºçŽ°çª—å£ã€‚*

*ç›´æŽ¥æ‰“å¼€ Chromeï¼Œ æŒ‰ä¸‹F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæ‰¾åˆ° Console,ä¹Ÿèƒ½æ‰§è¡Œä¸Šé¢çš„ä»£ç ã€‚*

çœ‹ä¸Šé¢çš„ä»£ç ï¼Œ `callWrapper`å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œ è¯¥åŒ¿åå‡½æ•°å†…éƒ¨å¹¶æ²¡æœ‰ä¸€ä¸ªå«åš foo çš„å˜é‡ï¼Œ foo æ˜¯å‡ºçŽ°åœ¨äº† åŒ¿åå‡½æ•°çš„ä¸Šé¢ã€‚

é‚£ä¹ˆï¼Œ è¿™ä¸ªè¯¥å¦‚ä½•å®žçŽ°å‘¢ï¼Ÿ  *è¿™é‡Œç¬”è€…ä»…æä¾›å‡ ä¸ªæ€è·¯ï¼Œå› ä¸ºç¬”è€…å¹¶æ²¡æœ‰çœŸæ­£å®žçŽ°è¿‡ã€‚*

- å°†åŒ¿åå‡½æ•°çš„æ‰§è¡ŒçŽ¯å¢ƒä»Žå£°æ˜ŽçŽ¯å¢ƒä¸Šæ‹“å±•å‡ºæ¥ã€‚ 
  - å¯ä»¥é€‰æ‹©ç»§æ‰¿è‡ª åŒ¿åå‡½æ•°çš„å£°æ˜ŽçŽ¯å¢ƒ
  - åŒ¿åå‡½æ•°è‡ªèº«å†…éƒ¨çš„å˜é‡è¿˜æ˜¯è¦å‚¨å­˜åœ¨å†…éƒ¨ã€‚
  - è®©åŒ¿åå‡½æ•°åœ¨æœç´¢å˜é‡çš„æ—¶å€™å…ˆä»Žçˆ¶çŽ¯å¢ƒä¸­æœç´¢ã€‚
- åœ¨åšè¯­æ³•åˆ†æžçš„æ—¶å€™ï¼Œ é”å®šå˜é‡å‡ºçŽ°çš„ä½ç½®ï¼Œ ç„¶åŽåœ¨çœŸæ­£åˆ›å»ºåŒ¿åå‡½æ•°çš„æ—¶å€™å¼•ç”¨å˜é‡



## æ€»ç»“

åŒ¿åå‡½æ•° ä¼¼ä¹Žä¹Ÿè¢«å«åš é—­åŒ…ï¼Œ lambda è¡¨è¾¾å¼ç­‰ã€‚ 


---

> ä½œè€…: Aincvy  
> URL: https://fantasyplayer.link/non-menu/self-programming-lang/%E8%87%AA%E5%88%B6%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%806.2-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0/  


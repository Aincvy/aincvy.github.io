# 从阿里云上把系统弄到本地的一些记录


声明： 本人在操作的时候 并不算完美的恢复了，只是现在是可用了，使用的平台是虚拟机（esxi 6.5） 里面恢复的

先推荐一个 工具 **mondo rescue**: http://www.mondorescue.org/

这个工具可以用来备份磁盘和在本地进行恢复。 不过似乎有点bug , 并且你磁盘过大的时候似乎也不太友好。

至于这个工具怎么用， 网上资料一堆， 直接在阿里云上进行运行即可， 不过需要你有足够的空余磁盘。 我之前是全盘备份， 26G左右的文件， 打包后 大约15G多。我碰到的情况是 生成4个iso 文件， 然后全部下载到本地 ，进行恢复就好了。

但是这里有个不是很友好的地方，如果你要把系统恢复到物理机的话， 你可能要多备几个U盘。 恢复流程大概就是先把 第一个iso镜像文件（文件名结尾为 01的iso文件） 写入 U盘/光盘 然后让物理机从 该设备启动。 会看到一个界面， 想要全盘恢复就输入nuke 之后会提示你插入第二个光盘 并按enter键。 想要节省时间的话， 就提前把第二个镜像写入 U盘或者光盘， 看到提示就 切换一下，然后按enter。

如果你是使用虚拟机就比较简单， 直接把镜像文件切换 按enter键就可以了。

对了用虚拟机的话， 只给虚拟机一个cd-rom设备就可以了， 看到提示就更换挂载的镜像文件， 然后按enter。 

我这里是换硬盘恢复的， 会提示 挂载点变更， 类似 `mountlist has changed`之类的提示， 问我是否要更新这个， 按确定进行更新， 然后操作一下。 其实这里应该只是修改引导， 让你恢复之后的系统可以启动。

我这里碰到了一个问题，无法解决。 就是恢复之后 会有一个文件把我的磁盘占满， 我本来用50G的空间， 不行， 改成80G之后还不行， 我感觉是工具出bug了。

引导的问题， 弄了半天都没有搞好。 然后我就把当前虚拟机的硬盘 挂到了另外一个虚拟机里面， 然后用 mount 命令挂载一下硬盘， 把文件复制一下。 就好了。



---

> 作者: Aincvy  
> URL: https://fantasyplayer.link/periphery/%E4%BB%8E%E9%98%BF%E9%87%8C%E4%BA%91%E4%B8%8A%E6%8A%8A%E7%B3%BB%E7%BB%9F%E5%BC%84%E5%88%B0%E6%9C%AC%E5%9C%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AE%B0%E5%BD%95/  


# 再谈谈面试题


笔者前些天去面试得时候碰到了一个比较蛋疼得笔试题，所以就再来谈谈面试题这个东西。 



### 面试题得格式

让笔者觉得无语得是那家公司得笔试题居然**没有对代码进行对齐！**

下面这段代码是笔者依赖印象重现得。 *具体代码记不清了，只是说明格式得问题:joy:*

public class Father{

public int a = 1;

}

class Son extends Father{

public int a = 2;



public static void main(String[] args){

Father f = new Son();

System.out.println(f.a);

}

}



让笔者想大为吐槽得有两点：

- 代码不对齐
- 关键字不高亮

这两点弄得笔者简直看不懂代码:joy::joy::joy:

关键字高亮了之后，虽然打印出来还是黑白文档，但是关键字会和别得代码有点区别， 让人容易辨认。

至于对齐就特么太伤了， 完全不适应。。。

*笔者在笔试题上吐槽了对齐得问题，并说明pdf文档可以很方便得对齐得。。  不知道他们会不会修改一下。。*

笔者还想吐槽得是， 他们部分题目得`main`方法直接写在了实体类里面， 笔者差点以为他们代码写错了。。 🤣🤣🤣



### 劣质面试题

除了格式之外， 他们家笔试题还存在部分劣质笔试题， 不知道是不是直接百度了得。。 

劣质面试题就是除了为难面试者之外完全没有其他价值得题目。 如果真的在工作中这么做可能还要被骂得代码。。

因为笔者一般情况下愿意追求高度得抽象或者简单方便得代码。 所以那些面试题有部分根本没见过，自然而然得就难以正确作答。。  

这里笔者还有点想说得内容是： 如果想要获得这家或者出现类似面试题得公司得工作， 读者就需要对那些劣质面试题**能**进行作答。  简单来说，就是需要花费一些时间对那种千奇百怪得面试题进行学习，记忆。 虽然这些题目除了这种面试之外并没有其他什么作用了。。  

这就好像上学得时候学习物理，化学，高数啥得， 出来之后很多东西基本上用不着。但是就算知道以后很可能用不着， 在上学得时候也得学习一样。。 



### 关于线程安全得Map

这是一个小插曲。

&gt; 面试官： 你JAVA基础怎么样？ 说一说线程安全得Map 和ArrayList 把
&gt;
&gt; 笔者： 有一个叫Con 啥得Map。。。
&gt;
&gt; 面试官： 你在代码中不用这些类型吗？
&gt;
&gt; 笔者： 用的很少， 基本上不怎么使用。。。
&gt;
&gt; 面试官： 你们怎么给玩家发消息得？
&gt;
&gt; 笔者： SessionManager
&gt;
&gt; 面试官： 如何给指定得玩家发送消息？
&gt;
&gt; 笔者： SessionManager里面有一个玩家Id为key得map。 这个map 是线程安全得。。
&gt;
&gt; 。。。。

笔者当时是真的不记得类名了， 因为这个类极少使用。。 而且IDE都有自动完成得功能。。

最近笔者去搜索了一下该类， 类名应该是`ConcurrentHashMap` 。 输入`Con` 会自动提示。。。

`ArrayList`得线程安全类 笔者后来记起来了， 应该是`CopyOnWriteArrayList` 。 

笔者今天在读《深入了解JAVA虚拟机》这本书得时候得知， `Vector`, `HashTable` 也分别是线程安全得`List,Map`  不知道面试官是否在期待笔者回答这两个类。。。

`java.util.concurrent` 包里面类应该都是并发相关得。

再稍微聊下关于线程安全得手段：  加锁。

一般情况下， 笔者建议能不加锁就不要加锁， 因为加锁导致得性能下降还是比较严重得。 虽然现在得JVM对这部分内容做了很多得优化，但是如果能在框架设计层面就减少大量得加锁操作，那是最好得。

*更多关于加锁会导致性能下降得文章，读者可以自行谷歌。 或者阅读《深入了解JAVA虚拟机》第五部分。*

说真的， 笔者工作了5年多了， `volatile` 关键字基本上没用过。。 `synchronized` 少量得用过， 用的不多。  虽然有部分原因是因为笔者对两个关键字不熟，不太明白用法，但是更多得原因是因为笔者不需要使用这两个关键字。 

在笔者做塔防项目得时候 （*2017年*），笔者是一个人处理战斗服功能得。 在笔者得设计中， 一个线程会驱动N个房间得运算，  此时房间内得大部分属性都是在单个线程运算得，所以基本上不需要加锁。  一般情况下，配置数据是共享的， 但是配置数据在加载之后就不会发生变化了， 所以只要能提前加载就OK 。 *现在笔者推荐对配置数据使用`ImmutableMap` 之类得不可变类型， 这些类型本身就是线程安全得。*

当然，笔者说了这么多不是给自己开脱， 想要通过这样得面试， 就需要知道面试官提出问题得答案。 笔者只是说出了一些关于线程安全得更多知识。


---

> 作者: Aincvy  
> URL: https://fantasyplayer.link/caprice/%E5%86%8D%E8%B0%88%E8%B0%88%E9%9D%A2%E8%AF%95%E9%A2%98/  

